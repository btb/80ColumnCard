<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="stylesheet" href="SGStyle.css"/>

    <meta name="description" content="SourceGen-generated disassembly of Videx Videoterm ROM 2.4.bin"/>
    <title>Videx Videoterm ROM 2.4.bin Disassembly</title>
</head>

<body>

<p style="font-size:smaller;"><a href="./">(back to project page)</a></p>
<h1>Videx Videoterm ROM 2.4.bin Disassembly</h1>

<div id="code-lines">
    <!-- The CodeLines marker is not optional, and may only appear once -->
<pre>                   ********************************************************************************
                   *                                                                              *
                   * Videoterm Interface                                                          *
                   * Firmware v. 2.4                                                              *
                   *                                                                              *
                   * Written by Darrel Aldrich                                                    *
                   * (c) 1981 Videx                                                               *
                   *                                                                              *
                   ********************************************************************************
                   * 6502bench SourceGen v1.8.4-dev1                                              *
                   ********************************************************************************
                   <span id="SymMON_CH">MON_CH</span>          .eq     $24               ;cursor horizontal displacement
                   <span id="SymMON_CV">MON_CV</span>          .eq     $25               ;cursor vertical displacement
                   <span id="SymMON_BASL">MON_BASL</span>        .eq     $28               ;base address for text output (lo)
                   <span id="SymXSAVE">XSAVE</span>           .eq     $35               ;not used by monitor?
                   <span id="SymMON_CSWL">MON_CSWL</span>        .eq     $36               ;character output hook (lo)
                   <span id="SymMON_CSWH">MON_CSWH</span>        .eq     $37               ;character output hook (hi)
                   <span id="SymMON_KSWL">MON_KSWL</span>        .eq     $38               ;character input hook (lo)
                   <span id="SymMON_KSWH">MON_KSWH</span>        .eq     $39               ;character input hook (hi)
                   <span id="SymMON_RNDL">MON_RNDL</span>        .eq     $4e               ;low byte of KEYIN "random" value
                   <span id="SymMON_RNDH">MON_RNDH</span>        .eq     $4f               ;high byte of KEYIN "random" value
                   <span id="SymIN">IN</span>              .eq     $0200
                   <span id="SymCRFLAG">CRFLAG</span>          .eq     $0478             ;temp
                   <span id="SymBASEL">BASEL</span>           .eq     $047b             ;Screen base address low
                   <span id="SymASAV1">ASAV1</span>           .eq     $04f8             ;temp
                   <span id="SymBASEH">BASEH</span>           .eq     $04fb             ;Screen base address high
                   <span id="SymCHORZ">CHORZ</span>           .eq     $057b             ;Cursor horizontal position
                   <span id="SymTEMPX">TEMPX</span>           .eq     $05f8             ;temp
                   <span id="SymCVERT">CVERT</span>           .eq     $05fb             ;Cursor vertical position
                   <span id="SymOLDCHAR">OLDCHAR</span>         .eq     $0678             ;temp
                   <span id="SymBYTE">BYTE</span>            .eq     $067b             ;I/O byte for Pascal entries
                   <span id="SymSTART">START</span>           .eq     $06fb             ;Screen start address
                   <span id="SymPOFF">POFF</span>            .eq     $077b             ;Power off and lead in counter
                   <span id="SymFLAGS">FLAGS</span>           .eq     $07fb             ;Video set up flags
                   <span id="SymKBD">KBD</span>             .eq     $c000             ;R last key pressed + 128
                   <span id="SymKBDSTRB">KBDSTRB</span>         .eq     $c010             ;RW keyboard strobe
                   <span id="SymSPKR">SPKR</span>            .eq     $c030             ;RW toggle speaker
                   <span id="SymSETAN0">SETAN0</span>          .eq     $c058             ;RW annunciator 0 off
                   <span id="SymCLRAN0">CLRAN0</span>          .eq     $c059             ;RW annunciator 0 on
                   <span id="SymBUTN2">BUTN2</span>           .eq     $c063             ;R switch input 2 / shift key
                   <span id="SymDEV0">DEV0</span>            .eq     $c0b0             ;CRTC Address Register
                   <span id="SymDEV1">DEV1</span>            .eq     $c0b1             ;CRTC Data Registers
                   <span id="SymDISP0">DISP0</span>           .eq     $cc00
                   <span id="SymDISP1">DISP1</span>           .eq     $cd00
                   <span id="SymCLRROM">CLRROM</span>          .eq     $cfff             ;disable slot C8 ROM
                   <span id="SymMON_VTAB">MON_VTAB</span>        .eq     $fc22             ;tab to row specified in CV
                   <span id="SymMON_SETKBD">MON_SETKBD</span>      .eq     $fe89             ;reset char input handler to ROM
                   <span id="SymMON_SETVID">MON_SETVID</span>      .eq     $fe93             ;reset char output handler to ROM
                   <span id="SymIORTS">IORTS</span>           .eq     $ffcb

                   ********************************************************************************
                   *                                                                              *
                   * Set up CRTC and clear screen                                                 *
                   *                                                                              *
                   ********************************************************************************
                                   .addrs  $c800
c800: ad 7b 07     <span id="SymSETUP">SETUP</span>           lda     <a href="#SymPOFF">POFF</a>              ;Get power off flag
c803: 29 f8                        and     #$f8              ;Strip off lead in counters
c805: c9 30                        cmp     #$30              ;Has power been turned off?
c807: f0 21                        beq     <a href="#SymSETEXIT">SETEXIT</a>
c809: a9 30        <span id="SymRESTART">RESTART</span>         lda     #$30
c80b: 8d 7b 07                     sta     <a href="#SymPOFF">POFF</a>              ;Set defaults for flags
c80e: 8d fb 07                     sta     <a href="#SymFLAGS">FLAGS</a>
c811: a9 00                        lda     #$00
c813: 8d fb 06                     sta     <a href="#SymSTART">START</a>
c816: 20 61 c9                     jsr     <a href="#SymCLSCRN">CLSCRN</a>
c819: a2 00                        ldx     #$00
c81b: 8a           <span id="SymLOOP">LOOP</span>            txa
c81c: 8d b0 c0                     sta     <a href="#SymDEV0">DEV0</a>              ;For the CRTC address
c81f: bd a1 c8                     lda     <a href="#SymTABLE">TABLE</a>,x           ;Get parameter
c822: 8d b1 c0                     sta     <a href="#SymDEV1">DEV1</a>              ;Store into CRTC
c825: e8                           inx
c826: e0 10                        cpx     #$10
c828: d0 f1                        bne     <a href="#SymLOOP">LOOP</a>              ;Continue loop until done
c82a: 8d 59 c0     <span id="SymSETEXIT">SETEXIT</span>         sta     <a href="#SymCLRAN0">CLRAN0</a>
c82d: 60                           rts

c82e: ad fb 07     <span id="SymEXIT">EXIT</span>            lda     <a href="#SymFLAGS">FLAGS</a>
c831: 29 08                        and     #$08
c833: f0 09                        beq     <a href="#SymNORMOUT">NORMOUT</a>
c835: 20 93 fe                     jsr     <a href="#SymMON_SETVID">MON_SETVID</a>
c838: 20 22 fc                     jsr     <a href="#SymMON_VTAB">MON_VTAB</a>
c83b: 20 89 fe                     jsr     <a href="#SymMON_SETKBD">MON_SETKBD</a>
c83e: 68           <span id="SymNORMOUT">NORMOUT</span>         pla                       ;Recover registers
c83f: a8                           tay
c840: 68                           pla
c841: aa                           tax
c842: 68                           pla
c843: 60                           rts

                   ********************************************************************************
                   *                                                                              *
                   * Get character from keyboard                                                  *
                   ********************************************************************************
c844: 20 d1 c8     <span id="SymRDKEY">RDKEY</span>           jsr     <a href="#SymCSRMOV">CSRMOV</a>            ;Position cursor
c847: e6 4e        <span id="SymKEYIN">KEYIN</span>           inc     <a href="#SymMON_RNDL">MON_RNDL</a>          ;Update basic random number
c849: d0 02                        bne     <a href="#SymKEYIN2">KEYIN2</a>
c84b: e6 4f                        inc     <a href="#SymMON_RNDH">MON_RNDH</a>
c84d: ad 00 c0     <span id="SymKEYIN2">KEYIN2</span>          lda     <a href="#SymKBD">KBD</a>               ;Poll keyboard
c850: 10 f5                        bpl     <a href="#SymKEYIN">KEYIN</a>             ;Loop until key is struck
c852: 20 5c c8                     jsr     <a href="#SymKEYSTAT">KEYSTAT</a>
c855: 90 f0                        bcc     <a href="#SymKEYIN">KEYIN</a>
c857: 2c 10 c0     <span id="SymNOKEY">NOKEY</span>           bit     <a href="#SymKBDSTRB">KBDSTRB</a>           ;Clear keyboard stroke
c85a: 18                           clc
c85b: 60                           rts

c85c: c9 8b        <span id="SymKEYSTAT">KEYSTAT</span>         cmp     #$8b              ;Check for control X
c85e: d0 02                        bne     <a href="#SymNOTK">NOTK</a>              ;Skip if not
c860: a9 db                        lda     #$db              ;Substitute a right bracket
c862: c9 81        <span id="SymNOTK">NOTK</span>            cmp     #$81              ;Check for control A
c864: d0 0a                        bne     <a href="#SymNTSHFT">NTSHFT</a>            ;Skip if not
c866: ad fb 07                     lda     <a href="#SymFLAGS">FLAGS</a>
c869: 49 40                        eor     #$40
c86b: 8d fb 07                     sta     <a href="#SymFLAGS">FLAGS</a>             ;Toggle upr/lwr case flag
c86e: b0 e7                        bcs     <a href="#SymNOKEY">NOKEY</a>             ;Get next key
c870: 48           <span id="SymNTSHFT">NTSHFT</span>          pha                       ;Save character
c871: ad fb 07                     lda     <a href="#SymFLAGS">FLAGS</a>
c874: 0a                           asl     A
c875: 0a                           asl     A                 ;Check upr/lwr case conversion flag
c876: 68                           pla                       ;Restore character
c877: 90 1f                        bcc     <a href="#SymINDONE">INDONE</a>            ;Don't convert if flag clear
c879: c9 b0                        cmp     #$b0
c87b: 90 1b                        bcc     <a href="#SymINDONE">INDONE</a>            ;Don't convert special characters
c87d: 2c 63 c0                     bit     <a href="#SymBUTN2">BUTN2</a>
c880: 30 14                        bmi     <a href="#SymNOSHIFT">NOSHIFT</a>
c882: c9 b0                        cmp     #‘0’ | $80
c884: f0 0e                        beq     <a href="#SymZERO">ZERO</a>
c886: c9 c0                        cmp     #‘@’ | $80
c888: d0 02                        bne     <a href="#SymNOTAT">NOTAT</a>
c88a: a9 d0                        lda     #‘P’ | $80
c88c: c9 db        <span id="SymNOTAT">NOTAT</span>           cmp     #‘[’ | $80
c88e: 90 08                        bcc     <a href="#SymINDONE">INDONE</a>
c890: 29 cf                        and     #$cf
c892: d0 04                        bne     <a href="#SymINDONE">INDONE</a>
c894: a9 dd        <span id="SymZERO">ZERO</span>            lda     #‘]’ | $80
c896: 09 20        <span id="SymNOSHIFT">NOSHIFT</span>         ora     #$20
c898: 48           <span id="SymINDONE">INDONE</span>          pha                       ;Duplicate character
c899: 29 7f                        and     #$7f              ;Strip off high bit
c89b: 8d 7b 06                     sta     <a href="#SymBYTE">BYTE</a>              ;Save for Pascal
c89e: 68                           pla                       ;Recover for Basic
c89f: 38                           sec
c8a0: 60                           rts

                   ********************************************************************************
                   * These are the CRTC initialization values, each one sent to a different       *
                   * internal register.                                                           *
                   ********************************************************************************
c8a1: 7a           <span id="SymTABLE">TABLE</span>           .dd1    $7a               ;R0 - Horizontal Total Register
c8a2: 50                           .dd1    $50               ;R1 - Horizontal Displayed Register
c8a3: 5e                           .dd1    $5e               ;R2 - Horizontal Sync Position Register
c8a4: 2f                           .dd1    $2f               ;R3 - Horizontal Sync Width Register
c8a5: 22                           .dd1    $22               ;R4 - Vertical Total Register
c8a6: 00                           .dd1    $00               ;R5 - Vertical Total Adjust Register
c8a7: 18                           .dd1    $18               ;R6 - Vertical Displayed Register
c8a8: 1d                           .dd1    $1d               ;R7 - Vertical Sync Position Register
c8a9: 00                           .dd1    $00               ;R8 - Interlace Mode Register
c8aa: 08                           .dd1    $08               ;R9 - Maximum Scan Line Register
c8ab: e0                           .dd1    $e0               ;R10 - Cursor End Register
c8ac: 08                           .dd1    $08               ;R11 - Cursor End Register
c8ad: 00                           .dd1    $00               ;R12 - Start Address Register (H)
c8ae: 00                           .dd1    $00               ;R13 - Start Address Register (L)
c8af: 00                           .dd1    $00               ;R14 - Cursor Register (H)
c8b0: 00                           .dd1    $00               ;R15 - Cursor Register (L)

                   ********************************************************************************
                   *                                                                              *
                   * Secondary basic output routine                                               *
                   *                                                                              *
                   ********************************************************************************
c8b1: 8d 7b 06     <span id="SymBASOUT1">BASOUT1</span>         sta     <a href="#SymBYTE">BYTE</a>
c8b4: a5 25                        lda     <a href="#SymMON_CV">MON_CV</a>
c8b6: cd fb 05                     cmp     <a href="#SymCVERT">CVERT</a>
c8b9: f0 06                        beq     <a href="#SymCVOK">CVOK</a>
c8bb: 8d fb 05                     sta     <a href="#SymCVERT">CVERT</a>
c8be: 20 04 ca                     jsr     <a href="#SymVTAB">VTAB</a>
c8c1: a5 24        <span id="SymCVOK">CVOK</span>            lda     <a href="#SymMON_CH">MON_CH</a>            ;Perform HTab
c8c3: cd 7b 05                     cmp     <a href="#SymCHORZ">CHORZ</a>
c8c6: 90 03                        bcc     <a href="#SymPSCLOUT">PSCLOUT</a>
c8c8: 8d 7b 05                     sta     <a href="#SymCHORZ">CHORZ</a>
c8cb: ad 7b 06     <span id="SymPSCLOUT">PSCLOUT</span>         lda     <a href="#SymBYTE">BYTE</a>              ;Get character
c8ce: 20 89 ca                     jsr     <a href="#SymOUTPT1">OUTPT1</a>            ;Output character
c8d1: a9 0f        <span id="SymCSRMOV">CSRMOV</span>          lda     #$0f              ;Set up CRTC address
c8d3: 8d b0 c0                     sta     <a href="#SymDEV0">DEV0</a>              ;for cursor low address
c8d6: ad 7b 05                     lda     <a href="#SymCHORZ">CHORZ</a>             ;Calculate address
c8d9: c9 50                        cmp     #80
c8db: b0 13                        bcs     <a href="#SymRTS6">RTS6</a>
c8dd: 6d 7b 04                     adc     <a href="#SymBASEL">BASEL</a>
c8e0: 8d b1 c0                     sta     <a href="#SymDEV1">DEV1</a>              ;Save address
c8e3: a9 0e                        lda     #$0e              ;Set up CRTC address
c8e5: 8d b0 c0                     sta     <a href="#SymDEV0">DEV0</a>              ;for cursor high address
c8e8: a9 00                        lda     #$00              ;Calculate address
c8ea: 6d fb 04                     adc     <a href="#SymBASEH">BASEH</a>
c8ed: 8d b1 c0                     sta     <a href="#SymDEV1">DEV1</a>              ;Save address
c8f0: 60           <span id="SymRTS6">RTS6</span>            rts

                   ********************************************************************************
                   *                                                                              *
                   * Perform escape functions                                                     *
                   ********************************************************************************
c8f1: 49 c0        <span id="SymESC1">ESC1</span>            eor     #$c0
c8f3: c9 08                        cmp     #$08
c8f5: b0 1d                        bcs     <a href="#SymRTS3">RTS3</a>
c8f7: a8                           tay
c8f8: a9 c9                        lda     #&gt;<a href="#SymBELL">BELL</a>
c8fa: 48                           pha
c8fb: b9 f2 cb                     lda     <a href="#SymESCTBL">ESCTBL</a>,y
c8fe: 48                           pha
c8ff: 60                           rts

c900: ea                           nop
c901: ac 7b 05     <span id="SymCLREOL">CLREOL</span>          ldy     <a href="#SymCHORZ">CHORZ</a>             ;Put cursor horizontal into Y
c904: a9 a0        <span id="SymCLEOLZ">CLEOLZ</span>          lda     #$a0              ;Use a space
c906: 20 71 ca     <span id="SymCLEOL2">CLEOL2</span>          jsr     <a href="#SymCHRPUT">CHRPUT</a>            ;Put character on screen
c909: c8                           iny
c90a: c0 50                        cpy     #80               ;Continue until
c90c: 90 f8                        bcc     <a href="#SymCLEOL2">CLEOL2</a>            ;Y &gt;= 80
c90e: 60                           rts

c90f: a9 34        <span id="SymLEADIN">LEADIN</span>          lda     #$34              ;Set lead in bit
c911: 8d 7b 07     <span id="SymPSAVE">PSAVE</span>           sta     <a href="#SymPOFF">POFF</a>
c914: 60           <span id="SymRTS3">RTS3</span>            rts

c915: a9 32        <span id="SymGOXY1">GOXY1</span>           lda     #$32              ;Set lead in count to 2
c917: d0 f8                        bne     <a href="#SymPSAVE">PSAVE</a>

c919: a0 c0        <span id="SymBELL">BELL</span>            ldy     #$c0              ;Beep the speaker
c91b: a2 80        <span id="SymBELL1">BELL1</span>           ldx     #$80
c91d: ca           <span id="SymBELL2">BELL2</span>           dex
c91e: d0 fd                        bne     <a href="#SymBELL2">BELL2</a>
c920: ad 30 c0                     lda     <a href="#SymSPKR">SPKR</a>
c923: 88                           dey
c924: d0 f5                        bne     <a href="#SymBELL1">BELL1</a>
c926: 60                           rts

                   ********************************************************************************
                   * Store character on screen and advance cursor                                 *
                   ********************************************************************************
c927: ac 7b 05     <span id="SymSTOADV">STOADV</span>          ldy     <a href="#SymCHORZ">CHORZ</a>
c92a: c0 50                        cpy     #80
c92c: 90 05                        bcc     <a href="#SymNOT81">NOT81</a>
c92e: 48                           pha
c92f: 20 b0 c9                     jsr     <a href="#SymCRLF">CRLF</a>
c932: 68                           pla
c933: ac 7b 05     <span id="SymNOT81">NOT81</span>           ldy     <a href="#SymCHORZ">CHORZ</a>
c936: 20 71 ca                     jsr     <a href="#SymCHRPUT">CHRPUT</a>            ;Place character on screen
c939: ee 7b 05     <span id="SymADVANCE">ADVANCE</span>         inc     <a href="#SymCHORZ">CHORZ</a>             ;Increment cursor horizontal index
c93c: 2c 78 04                     bit     <a href="#SymCRFLAG">CRFLAG</a>
c93f: 10 07                        bpl     <a href="#SymRTS8">RTS8</a>
c941: ad 7b 05                     lda     <a href="#SymCHORZ">CHORZ</a>
c944: c9 50                        cmp     #80
c946: b0 68                        bcs     <a href="#SymCRLF">CRLF</a>
c948: 60           <span id="SymRTS8">RTS8</span>            rts

                   ********************************************************************************
                   * Clear to end of page                                                         *
                   ********************************************************************************
c949: ac 7b 05     <span id="SymCLREOP">CLREOP</span>          ldy     <a href="#SymCHORZ">CHORZ</a>             ;Get cursor horizontal into Y
c94c: ad fb 05                     lda     <a href="#SymCVERT">CVERT</a>             ;Get cursor vertical into A
c94f: 48           <span id="SymCLEOP1">CLEOP1</span>          pha                       ;Save current line on stack
c950: 20 07 ca                     jsr     <a href="#SymVTABZ">VTABZ</a>             ;Calculate base address
c953: 20 04 c9                     jsr     <a href="#SymCLEOLZ">CLEOLZ</a>            ;Clear to end of line, set carry
c956: a0 00                        ldy     #$00              ;Clear from horizontal index 0
c958: 68                           pla
c959: 69 00                        adc     #$00              ;Increment current line (C=1)
c95b: c9 18                        cmp     #24               ;Done to bottom of window?
c95d: 90 f0                        bcc     <a href="#SymCLEOP1">CLEOP1</a>            ;If not keep clearing lines
c95f: b0 23                        bcs     <a href="#SymJVTAB">JVTAB</a>             ;Vertical tab to cursor position

                   ********************************************************************************
                   * Clear screen                                                                 *
                   ********************************************************************************
c961: 20 67 c9     <span id="SymCLSCRN">CLSCRN</span>          jsr     <a href="#SymHOME">HOME</a>              ;Home cursor
c964: 98                           tya
c965: f0 e8                        beq     <a href="#SymCLEOP1">CLEOP1</a>            ;Clear to end of page
                   ********************************************************************************
                   * Home cursor                                                                  *
                   ********************************************************************************
c967: a9 00        <span id="SymHOME">HOME</span>            lda     #$00              ;Set cursor position to 0,0
c969: 8d 7b 05                     sta     <a href="#SymCHORZ">CHORZ</a>
c96c: 8d fb 05                     sta     <a href="#SymCVERT">CVERT</a>
c96f: a8                           tay
c970: f0 12                        beq     <a href="#SymJVTAB">JVTAB</a>             ;Vertical tab to cursor position
c972: ce 7b 05     <span id="SymBS">BS</span>              dec     <a href="#SymCHORZ">CHORZ</a>             ;Decrement cursor horizontal index
c975: 10 9d                        bpl     <a href="#SymRTS3">RTS3</a>              ;If pos, OK. Else move up
c977: a9 4f                        lda     #79               ;Set cursor horizontal to
c979: 8d 7b 05                     sta     <a href="#SymCHORZ">CHORZ</a>             ;rightmost screen position
                   ********************************************************************************
                   * Move cursor up                                                               *
                   ********************************************************************************
c97c: ad fb 05     <span id="SymUP">UP</span>              lda     <a href="#SymCVERT">CVERT</a>             ;Get cursor vertical index
c97f: f0 93                        beq     <a href="#SymRTS3">RTS3</a>              ;If top line then return
c981: ce fb 05                     dec     <a href="#SymCVERT">CVERT</a>             ;Decrement cursor vertical index
c984: 4c 04 ca     <span id="SymJVTAB">JVTAB</span>           jmp     <a href="#SymVTAB">VTAB</a>              ;Vertical tab to cursor position

c987: a9 30        <span id="SymNOTGOXY">NOTGOXY</span>         lda     #$30              ;Clear lead in bits
c989: 8d 7b 07                     sta     <a href="#SymPOFF">POFF</a>
c98c: 68                           pla                       ;Recover character
c98d: 09 80                        ora     #$80
c98f: c9 b1                        cmp     #‘1’ | $80
c991: d0 67                        bne     <a href="#SymNOT0">NOT0</a>
c993: a9 08                        lda     #$08
c995: 8d 58 c0                     sta     <a href="#SymSETAN0">SETAN0</a>
c998: d0 5b                        bne     <a href="#SymFLGSET">FLGSET</a>

c99a: c9 b2        <span id="SymNOT1">NOT1</span>            cmp     #‘2’ | $80
c99c: d0 51                        bne     <a href="#SymNOT2">NOT2</a>
c99e: a9 fe        <span id="SymLOLITE">LOLITE</span>          lda     #$fe
c9a0: 2d fb 07     <span id="SymFLGCLR">FLGCLR</span>          and     <a href="#SymFLAGS">FLAGS</a>
c9a3: 8d fb 07     <span id="SymFLGSAV">FLGSAV</span>          sta     <a href="#SymFLAGS">FLAGS</a>
c9a6: 60                           rts

                   ********************************************************************************
                   *                                                                              *
                   * Pascal output entry point                                                    *
                   *                                                                              *
                   ********************************************************************************
c9a7: 8d 7b 06     <span id="SymPSOUT">PSOUT</span>           sta     <a href="#SymBYTE">BYTE</a>
c9aa: 4e 78 04                     lsr     <a href="#SymCRFLAG">CRFLAG</a>
c9ad: 4c cb c8                     jmp     <a href="#SymPSCLOUT">PSCLOUT</a>           ;Jump for Pascal entry

                   ********************************************************************************
                   *                                                                              *
                   * CR LF routine                                                                *
                   ********************************************************************************
c9b0: 20 27 ca     <span id="SymCRLF">CRLF</span>            jsr     <a href="#SymCR">CR</a>
c9b3: ee fb 05     <span id="SymLF">LF</span>              inc     <a href="#SymCVERT">CVERT</a>             ;Increment cursor vertical
c9b6: ad fb 05                     lda     <a href="#SymCVERT">CVERT</a>
c9b9: c9 18                        cmp     #24               ;Off screen?
c9bb: 90 4a                        bcc     <a href="#SymVTABZ">VTABZ</a>             ;If not move cursor
c9bd: ce fb 05                     dec     <a href="#SymCVERT">CVERT</a>             ;If so decrement cursor vertical
                   ; 
c9c0: ad fb 06                     lda     <a href="#SymSTART">START</a>             ;Increment the start address
c9c3: 69 04                        adc     #$04              ;by one line
c9c5: 29 7f                        and     #$7f
c9c7: 8d fb 06                     sta     <a href="#SymSTART">START</a>
c9ca: 20 12 ca                     jsr     <a href="#SymBASCLC1">BASCLC1</a>           ;Calculate the start address
c9cd: a9 0d                        lda     #$0d              ;Set up CRTC address
c9cf: 8d b0 c0                     sta     <a href="#SymDEV0">DEV0</a>              ;for start low address
c9d2: ad 7b 04                     lda     <a href="#SymBASEL">BASEL</a>             ;Get start low
c9d5: 8d b1 c0                     sta     <a href="#SymDEV1">DEV1</a>              ;Save start low
c9d8: a9 0c                        lda     #$0c              ;Set up CRTC address
c9da: 8d b0 c0                     sta     <a href="#SymDEV0">DEV0</a>              ;for start high address
c9dd: ad fb 04                     lda     <a href="#SymBASEH">BASEH</a>             ;Get start high
c9e0: 8d b1 c0                     sta     <a href="#SymDEV1">DEV1</a>              ;Save start high
c9e3: a9 17                        lda     #23               ;Put window bottom-1 into A
c9e5: 20 07 ca                     jsr     <a href="#SymVTABZ">VTABZ</a>             ;Calculate base address
c9e8: a0 00                        ldy     #$00
c9ea: 20 04 c9                     jsr     <a href="#SymCLEOLZ">CLEOLZ</a>            ;Clear bottom line
c9ed: b0 95                        bcs     <a href="#SymJVTAB">JVTAB</a>             ;Move cursor back
                   ; 
c9ef: c9 b3        <span id="SymNOT2">NOT2</span>            cmp     #‘3’ | $80
c9f1: d0 0e                        bne     <a href="#SymJSTOADV">JSTOADV</a>
c9f3: a9 01        <span id="SymHILITE">HILITE</span>          lda     #$01
c9f5: 0d fb 07     <span id="SymFLGSET">FLGSET</span>          ora     <a href="#SymFLAGS">FLAGS</a>
c9f8: d0 a9                        bne     <a href="#SymFLGSAV">FLGSAV</a>
                   ********************************************************************************
                   *                                                                              *
                   * Basic initial I/O entry point                                                *
                   *                                                                              *
                   *                                                                              *
                   ********************************************************************************
c9fa: c9 b0        <span id="SymNOT0">NOT0</span>            cmp     #‘0’ | $80
c9fc: d0 9c                        bne     <a href="#SymNOT1">NOT1</a>
c9fe: 4c 09 c8                     jmp     <a href="#SymRESTART">RESTART</a>

ca01: 4c 27 c9     <span id="SymJSTOADV">JSTOADV</span>         jmp     <a href="#SymSTOADV">STOADV</a>

ca04: ad fb 05     <span id="SymVTAB">VTAB</span>            lda     <a href="#SymCVERT">CVERT</a>             ;Get cursor vertical
ca07: 8d f8 04     <span id="SymVTABZ">VTABZ</span>           sta     <a href="#SymASAV1">ASAV1</a>             ;Multiply A by 5
ca0a: 0a                           asl     A
ca0b: 0a                           asl     A
ca0c: 6d f8 04                     adc     <a href="#SymASAV1">ASAV1</a>
ca0f: 6d fb 06                     adc     <a href="#SymSTART">START</a>             ;Add start
ca12: 48           <span id="SymBASCLC1">BASCLC1</span>         pha                       ;Save A
ca13: 4a                           lsr     A                 ;Calculate BASEH
ca14: 4a                           lsr     A
ca15: 4a                           lsr     A
ca16: 4a                           lsr     A
ca17: 8d fb 04                     sta     <a href="#SymBASEH">BASEH</a>
ca1a: 68                           pla                       ;Recover A
ca1b: 0a                           asl     A                 ;Calculate BASEL
ca1c: 0a                           asl     A
ca1d: 0a                           asl     A
ca1e: 0a                           asl     A
ca1f: 8d 7b 04                     sta     <a href="#SymBASEL">BASEL</a>
ca22: 60           <span id="SymRTS2">RTS2</span>            rts

ca23: c9 0d        <span id="SymVIDOUT">VIDOUT</span>          cmp     #$0d
ca25: d0 06                        bne     <a href="#SymVDOUT1">VDOUT1</a>
ca27: a9 00        <span id="SymCR">CR</span>              lda     #$00
ca29: 8d 7b 05                     sta     <a href="#SymCHORZ">CHORZ</a>
ca2c: 60                           rts

ca2d: 09 80        <span id="SymVDOUT1">VDOUT1</span>          ora     #$80              ;Set high bit
ca2f: c9 a0                        cmp     #$a0
ca31: b0 ce                        bcs     <a href="#SymJSTOADV">JSTOADV</a>           ;If not control print it
ca33: c9 87                        cmp     #$87
ca35: 90 08                        bcc     <a href="#SymRTS4">RTS4</a>              ;CTRL @ - F
ca37: a8                           tay
ca38: a9 c9                        lda     #&gt;<a href="#SymBELL">BELL</a>
ca3a: 48                           pha
ca3b: b9 b9 c9                     lda     <a href="#SymCTLTBL">CTLTBL</a>-135,y
ca3e: 48                           pha
ca3f: 60           <span id="SymRTS4">RTS4</span>            rts

ca40: 18           <span id="SymCTLTBL">CTLTBL</span>          .dd1    &lt;<a href="#SymBELL">BELL</a>-1
ca41: 71                           .dd1    &lt;<a href="#SymBS">BS</a>-1
ca42: 13                           .dd1    &lt;<a href="#SymRTS3">RTS3</a>-1
ca43: b2                           .dd1    &lt;<a href="#SymLF">LF</a>-1
ca44: 48                           .dd1    &lt;<a href="#SymCLREOP">CLREOP</a>-1
ca45: 60                           .dd1    &lt;<a href="#SymCLSCRN">CLSCRN</a>-1
ca46: af                           .dd1    &lt;<a href="#SymCRLF">CRLF</a>-1
ca47: 9d                           .dd1    &lt;<a href="#SymLOLITE">LOLITE</a>-1
ca48: f2                           .dd1    &lt;<a href="#SymHILITE">HILITE</a>-1
ca49: 13                           .dd1    &lt;<a href="#SymRTS3">RTS3</a>-1
ca4a: 13                           .dd1    &lt;<a href="#SymRTS3">RTS3</a>-1
ca4b: 13                           .dd1    &lt;<a href="#SymRTS3">RTS3</a>-1
ca4c: 13                           .dd1    &lt;<a href="#SymRTS3">RTS3</a>-1
ca4d: 13                           .dd1    &lt;<a href="#SymRTS3">RTS3</a>-1
ca4e: 13                           .dd1    &lt;<a href="#SymRTS3">RTS3</a>-1
ca4f: 13                           .dd1    &lt;<a href="#SymRTS3">RTS3</a>-1
ca50: 13                           .dd1    &lt;<a href="#SymRTS3">RTS3</a>-1
ca51: 13                           .dd1    &lt;<a href="#SymRTS3">RTS3</a>-1
ca52: 66                           .dd1    &lt;<a href="#SymHOME">HOME</a>-1
ca53: 0e                           .dd1    &lt;<a href="#SymLEADIN">LEADIN</a>-1
ca54: 13                           .dd1    &lt;<a href="#SymRTS3">RTS3</a>-1
ca55: 38                           .dd1    &lt;<a href="#SymADVANCE">ADVANCE</a>-1
ca56: 00                           .dd1    &lt;<a href="#SymCLREOL">CLREOL</a>-1
ca57: 14                           .dd1    &lt;<a href="#SymGOXY1">GOXY1</a>-1
ca58: 7b                           .dd1    &lt;<a href="#SymUP">UP</a>-1

                   ********************************************************************************
                   * Calculate screen address and switch in correct page                          *
                   *                                                                              *
                   ********************************************************************************
ca59: 18           <span id="SymPSNCALC">PSNCALC</span>         clc
ca5a: 98                           tya
ca5b: 6d 7b 04                     adc     <a href="#SymBASEL">BASEL</a>
ca5e: 48                           pha
ca5f: a9 00                        lda     #$00              ;Calculate screen address high
ca61: 6d fb 04                     adc     <a href="#SymBASEH">BASEH</a>
ca64: 48                           pha
ca65: 0a                           asl     A
ca66: 29 0c                        and     #$0c              ;Use bit 0 and 1 for paging
ca68: aa                           tax
ca69: bd b0 c0                     lda     <a href="#SymDEV0">DEV0</a>,x            ;Set correct screen page
ca6c: 68                           pla
ca6d: 4a                           lsr     A
ca6e: 68                           pla
ca6f: aa                           tax
ca70: 60                           rts

                   ********************************************************************************
                   *                                                                              *
                   * Put a character at CVERT, CHORZ                                              *
                   *                                                                              *
                   ********************************************************************************
ca71: 0a           <span id="SymCHRPUT">CHRPUT</span>          asl     A
ca72: 48                           pha                       ;Save shifted character
ca73: ad fb 07                     lda     <a href="#SymFLAGS">FLAGS</a>             ;Get character set flag
ca76: 4a                           lsr     A                 ;Shift it into carry
ca77: 68                           pla                       ;Recover shifted character
ca78: 6a                           ror     A                 ;Rotate carry into character
ca79: 48                           pha                       ;Save character
ca7a: 20 59 ca                     jsr     <a href="#SymPSNCALC">PSNCALC</a>           ;Set up screen address
ca7d: 68                           pla                       ;Recover character
ca7e: b0 05                        bcs     <a href="#SymWRITE1">WRITE1</a>            ;Select memory range
ca80: 9d 00 cc                     sta     <a href="#SymDISP0">DISP0</a>,x           ;Store character on screen
ca83: 90 03                        bcc     <a href="#SymWSKIP">WSKIP</a>             ;Skip

ca85: 9d 00 cd     <span id="SymWRITE1">WRITE1</span>          sta     <a href="#SymDISP1">DISP1</a>,x           ;Store character on screen
ca88: 60           <span id="SymWSKIP">WSKIP</span>           rts                       ;Recover X register

                   ********************************************************************************
                   *                                                                              *
                   * General output routine                                                       *
                   *                                                                              *
                   ********************************************************************************
ca89: 48           <span id="SymOUTPT1">OUTPT1</span>          pha                       ;Save character
ca8a: a9 f7                        lda     #$f7
ca8c: 20 a0 c9                     jsr     <a href="#SymFLGCLR">FLGCLR</a>
ca8f: 8d 59 c0                     sta     <a href="#SymCLRAN0">CLRAN0</a>
ca92: ad 7b 07                     lda     <a href="#SymPOFF">POFF</a>
ca95: 29 07                        and     #$07              ;Check for lead in
ca97: d0 04                        bne     <a href="#SymLEAD">LEAD</a>              ;Branch for lead in
ca99: 68                           pla                       ;Recover character
ca9a: 4c 23 ca                     jmp     <a href="#SymVIDOUT">VIDOUT</a>            ;Output character

ca9d: 29 04        <span id="SymLEAD">LEAD</span>            and     #$04              ;Check for go to XY
ca9f: f0 03                        beq     <a href="#SymGOXY3">GOXY3</a>             ;If not skip
caa1: 4c 87 c9                     jmp     <a href="#SymNOTGOXY">NOTGOXY</a>

caa4: 68           <span id="SymGOXY3">GOXY3</span>           pla                       ;Recover character
caa5: 38                           sec
caa6: e9 20                        sbc     #$20              ;Subtract 32
caa8: 29 7f                        and     #$7f              ;Strip off unneeded bits
caaa: 48                           pha                       ;Save A
caab: ce 7b 07                     dec     <a href="#SymPOFF">POFF</a>              ;Decrement lead in counter
caae: ad 7b 07                     lda     <a href="#SymPOFF">POFF</a>
cab1: 29 03                        and     #$03              ;Get count
cab3: d0 15                        bne     <a href="#SymGOXY2">GOXY2</a>             ;Skip if count not zero
cab5: 68                           pla                       ;Recover A
cab6: c9 18                        cmp     #24               ;If A &gt; window bottom
cab8: b0 03                        bcs     <a href="#SymBADY">BADY</a>              ;Then don't move cursor vertical
caba: 8d fb 05                     sta     <a href="#SymCVERT">CVERT</a>
cabd: ad f8 05     <span id="SymBADY">BADY</span>            lda     <a href="#SymTEMPX">TEMPX</a>             ;Get cursor horizontal parameter
cac0: c9 50                        cmp     #80               ;If A &gt; 80 then
cac2: b0 03                        bcs     <a href="#SymBADX">BADX</a>              ;don't move cursor horizontal
cac4: 8d 7b 05                     sta     <a href="#SymCHORZ">CHORZ</a>
cac7: 4c 04 ca     <span id="SymBADX">BADX</span>            jmp     <a href="#SymVTAB">VTAB</a>              ;Vertical tab to cursor position

caca: 68           <span id="SymGOXY2">GOXY2</span>           pla                       ;Recover A
cacb: 8d f8 05                     sta     <a href="#SymTEMPX">TEMPX</a>             ;Save cursor horizontal parameter
cace: 60                           rts

                   ********************************************************************************
                   *                                                                              *
                   * Stop list routine                                                            *
                   *                                                                              *
                   ********************************************************************************
cacf: ad 00 c0     <span id="SymSTPLST">STPLST</span>          lda     <a href="#SymKBD">KBD</a>
cad2: c9 93                        cmp     #$93
cad4: d0 0f                        bne     <a href="#SymSTPDONE">STPDONE</a>
cad6: 2c 10 c0                     bit     <a href="#SymKBDSTRB">KBDSTRB</a>
cad9: ad 00 c0     <span id="SymSTPLOOP">STPLOOP</span>         lda     <a href="#SymKBD">KBD</a>
cadc: 10 fb                        bpl     <a href="#SymSTPLOOP">STPLOOP</a>
cade: c9 83                        cmp     #$83
cae0: f0 03                        beq     <a href="#SymSTPDONE">STPDONE</a>
cae2: 2c 10 c0                     bit     <a href="#SymKBDSTRB">KBDSTRB</a>
cae5: 60           <span id="SymSTPDONE">STPDONE</span>         rts

cae6: a8           <span id="SymESCNOW">ESCNOW</span>          tay
cae7: b9 31 cb                     lda     <a href="#SymXLTBL">XLTBL</a>-201,y
caea: 20 f1 c8                     jsr     <a href="#SymESC1">ESC1</a>
caed: 20 44 c8     <span id="SymESCNEW">ESCNEW</span>          jsr     <a href="#SymRDKEY">RDKEY</a>
caf0: c9 ce                        cmp     #$ce
caf2: b0 08                        bcs     <a href="#SymESC2">ESC2</a>
caf4: c9 c9                        cmp     #$c9
caf6: 90 04                        bcc     <a href="#SymESC2">ESC2</a>
caf8: c9 cc                        cmp     #$cc
cafa: d0 ea                        bne     <a href="#SymESCNOW">ESCNOW</a>
cafc: 4c f1 c8     <span id="SymESC2">ESC2</span>            jmp     <a href="#SymESC1">ESC1</a>

caff: ea                           nop
                   ********************************************************************************
                   *                                                                              *
                   *                                                                              *
                   *                                                                              *
                   *                                                                              *
                   * Basic initial I/O entry point                                                *
                   *                                                                              *
                   ********************************************************************************
cb00: 2c cb ff                     bit     <a href="#SymIORTS">IORTS</a>             ;Set VFlag on initial entry
cb03: 70 31                        bvs     <a href="#SymENTR">ENTR</a>
cb05: 38           <span id="SymINFAKE">INFAKE</span>          sec                       ;Fake input entry C=0
cb06: 90                           .dd1    $90
cb07: 18           <span id="SymOUTENTR">OUTENTR</span>         clc                       ;Output entry C=1
cb08: b8                           clv
cb09: 50 2b                        bvc     <a href="#SymENTR">ENTR</a>

cb0b: 01                           .dd1    $01
cb0c: 82                           .dd1    $82
cb0d: 11                           .dd1    &lt;<a href="#SymINIT">INIT</a>
cb0e: 14                           .dd1    &lt;<a href="#SymREAD">READ</a>
cb0f: 1c                           .dd1    &lt;<a href="#SymWRITE">WRITE</a>
cb10: 22                           .dd1    &lt;<a href="#SymSTATUS">STATUS</a>

cb11: 4c 00 c8     <span id="SymINIT">INIT</span>            jmp     <a href="#SymSETUP">SETUP</a>

cb14: 20 44 c8     <span id="SymREAD">READ</span>            jsr     <a href="#SymRDKEY">RDKEY</a>
cb17: 29 7f                        and     #$7f
cb19: a2 00                        ldx     #$00
cb1b: 60                           rts

cb1c: 20 a7 c9     <span id="SymWRITE">WRITE</span>           jsr     <a href="#SymPSOUT">PSOUT</a>
cb1f: a2 00                        ldx     #$00
cb21: 60                           rts

cb22: c9 00        <span id="SymSTATUS">STATUS</span>          cmp     #$00
cb24: f0 09                        beq     <a href="#SymSTEXIT">STEXIT</a>
cb26: ad 00 c0                     lda     <a href="#SymKBD">KBD</a>
cb29: 0a                           asl     A
cb2a: 90 03                        bcc     <a href="#SymSTEXIT">STEXIT</a>
cb2c: 20 5c c8                     jsr     <a href="#SymKEYSTAT">KEYSTAT</a>
cb2f: a2 00        <span id="SymSTEXIT">STEXIT</span>          ldx     #$00
cb31: 60                           rts

                   ********************************************************************************
                   * Basic input entry point                                                      *
                   ********************************************************************************
cb32: 91 28        <span id="SymINENTR">INENTR</span>          sta     (<a href="#SymMON_BASL">MON_BASL</a>),y      ;Replace flashing cursor
cb34: 38                           sec
cb35: b8                           clv
cb36: 8d ff cf     <span id="SymENTR">ENTR</span>            sta     <a href="#SymCLRROM">CLRROM</a>            ;Turn off co-resident memory
                   ********************************************************************************
                   *                                                                              *
                   *                                                                              *
                   * Save registers, set up NO and CN                                             *
                   *                                                                              *
                   ********************************************************************************
cb39: 48           <span id="SymWHERE">WHERE</span>           pha                       ;Save registers on stack
cb3a: 85 35                        sta     <a href="#SymXSAVE">XSAVE</a>
cb3c: 8a                           txa
cb3d: 48                           pha
cb3e: 98                           tya
cb3f: 48                           pha
cb40: a5 35                        lda     <a href="#SymXSAVE">XSAVE</a>             ;Save character
cb42: 86 35                        stx     <a href="#SymXSAVE">XSAVE</a>             ;Save input buffer index
cb44: a2 c3                        ldx     #$c3
cb46: 8e 78 04                     stx     <a href="#SymCRFLAG">CRFLAG</a>
cb49: 48                           pha
cb4a: 50 10                        bvc     <a href="#SymIO">IO</a>                ;Go to IO if not initial entry
                   ********************************************************************************
                   *                                                                              *
                   * Basic initialize                                                             *
                   *                                                                              *
                   ********************************************************************************
cb4c: a9 32                        lda     #&lt;<a href="#SymINENTR">INENTR</a>
cb4e: 85 38                        sta     <a href="#SymMON_KSWL">MON_KSWL</a>
cb50: 86 39                        stx     <a href="#SymMON_KSWH">MON_KSWH</a>
cb52: a9 07                        lda     #&lt;<a href="#SymOUTENTR">OUTENTR</a>
cb54: 85 36                        sta     <a href="#SymMON_CSWL">MON_CSWL</a>
cb56: 86 37                        stx     <a href="#SymMON_CSWH">MON_CSWH</a>
cb58: 20 00 c8                     jsr     <a href="#SymSETUP">SETUP</a>
cb5b: 18                           clc
cb5c: 90 6f        <span id="SymIO">IO</span>              bcc     <a href="#SymBASOUT">BASOUT</a>
                   ********************************************************************************
                   *                                                                              *
                   * Basic input routine                                                          *
                   *                                                                              *
                   ********************************************************************************
cb5e: 68           <span id="SymBASINP">BASINP</span>          pla                       ;Pop stack
cb5f: a4 35                        ldy     <a href="#SymXSAVE">XSAVE</a>             ;Get input buffer index
cb61: f0 1f                        beq     <a href="#SymGETLN">GETLN</a>             ;If zero assume GETLN
cb63: 88                           dey
cb64: ad 78 06                     lda     <a href="#SymOLDCHAR">OLDCHAR</a>           ;Get last character from GETLN
cb67: c9 88                        cmp     #$88              ;If BS assume GETLN
cb69: f0 17                        beq     <a href="#SymGETLN">GETLN</a>
cb6b: d9 00 02                     cmp     <a href="#SymIN">IN</a>,y
cb6e: f0 12                        beq     <a href="#SymGETLN">GETLN</a>
cb70: 49 20                        eor     #$20
cb72: d9 00 02                     cmp     <a href="#SymIN">IN</a>,y              ;If same as character in input
cb75: d0 3b                        bne     <a href="#SymNTGETLN">NTGETLN</a>           ;buffer then assume GETLN
cb77: ad 78 06                     lda     <a href="#SymOLDCHAR">OLDCHAR</a>           ;Get last character from GETLN
cb7a: 99 00 02                     sta     <a href="#SymIN">IN</a>,y              ;Fix input buffer
cb7d: b0 03                        bcs     <a href="#SymGETLN">GETLN</a>             ;Go to GETLN
cb7f: 20 ed ca     <span id="SymESC">ESC</span>             jsr     <a href="#SymESCNEW">ESCNEW</a>            ;Perform escape function
cb82: a9 80        <span id="SymGETLN">GETLN</span>           lda     #$80              ;Set GETLN flag
cb84: 20 f5 c9                     jsr     <a href="#SymFLGSET">FLGSET</a>
cb87: 20 44 c8                     jsr     <a href="#SymRDKEY">RDKEY</a>             ;Get character from keyboard
cb8a: c9 9b                        cmp     #$9b              ;Check for escape
cb8c: f0 f1                        beq     <a href="#SymESC">ESC</a>
cb8e: c9 8d                        cmp     #$8d              ;Check for CR
cb90: d0 05                        bne     <a href="#SymNOTCR">NOTCR</a>             ;If not skip
cb92: 48                           pha                       ;Save character
cb93: 20 01 c9                     jsr     <a href="#SymCLREOL">CLREOL</a>            ;Clear to end of line
cb96: 68                           pla                       ;Recover character
cb97: c9 95        <span id="SymNOTCR">NOTCR</span>           cmp     #$95              ;Check for pick
cb99: d0 12                        bne     <a href="#SymNOTPICK">NOTPICK</a>           ;If not skip
cb9b: ac 7b 05                     ldy     <a href="#SymCHORZ">CHORZ</a>             ;Get cursor horizontal position
cb9e: 20 59 ca                     jsr     <a href="#SymPSNCALC">PSNCALC</a>           ;Set up screen address
cba1: b0 05                        bcs     <a href="#SymREAD1">READ1</a>             ;Read character from screen
cba3: bd 00 cc                     lda     <a href="#SymDISP0">DISP0</a>,x
cba6: 90 03                        bcc     <a href="#SymRSKIP">RSKIP</a>

cba8: bd 00 cd     <span id="SymREAD1">READ1</span>           lda     <a href="#SymDISP1">DISP1</a>,x
cbab: 09 80        <span id="SymRSKIP">RSKIP</span>           ora     #$80              ;Set high bit
cbad: 8d 78 06     <span id="SymNOTPICK">NOTPICK</span>         sta     <a href="#SymOLDCHAR">OLDCHAR</a>           ;Save character in OLDCHAR
cbb0: d0 08                        bne     <a href="#SymDONE">DONE</a>              ;Exit

cbb2: 20 44 c8     <span id="SymNTGETLN">NTGETLN</span>         jsr     <a href="#SymRDKEY">RDKEY</a>             ;Get character from keyboard
cbb5: a0 00                        ldy     #$00              ;Clear OLDCHARacter
cbb7: 8c 78 06                     sty     <a href="#SymOLDCHAR">OLDCHAR</a>
cbba: ba           <span id="SymDONE">DONE</span>            tsx                       ;Put character into stack
cbbb: e8                           inx
cbbc: e8                           inx
cbbd: e8                           inx
cbbe: 9d 00 01                     sta     $0100,x
cbc1: a9 00        <span id="SymOUTDONE1">OUTDONE1</span>        lda     #$00              ;Set CH = 00
cbc3: 85 24        <span id="SymOUTDONE">OUTDONE</span>         sta     <a href="#SymMON_CH">MON_CH</a>
cbc5: ad fb 05                     lda     <a href="#SymCVERT">CVERT</a>             ;Set CV = CVERT
cbc8: 85 25                        sta     <a href="#SymMON_CV">MON_CV</a>
cbca: 4c 2e c8                     jmp     <a href="#SymEXIT">EXIT</a>

                   ********************************************************************************
                   *                                                                              *
                   * Primary Basic output routine                                                 *
                   *                                                                              *
                   ********************************************************************************
cbcd: 68           <span id="SymBASOUT">BASOUT</span>          pla                       ;Recover character
cbce: ac fb 07                     ldy     <a href="#SymFLAGS">FLAGS</a>             ;Check GETLN flags
cbd1: 10 08                        bpl     <a href="#SymBOUT">BOUT</a>              ;If clear then skip
cbd3: ac 78 06                     ldy     <a href="#SymOLDCHAR">OLDCHAR</a>           ;Get last character from GETLN
cbd6: c0 e0                        cpy     #$e0              ;If it is lower case then use it
cbd8: 90 01                        bcc     <a href="#SymBOUT">BOUT</a>
cbda: 98                           tya
cbdb: 20 b1 c8     <span id="SymBOUT">BOUT</span>            jsr     <a href="#SymBASOUT1">BASOUT1</a>           ;Output character
cbde: 20 cf ca                     jsr     <a href="#SymSTPLST">STPLST</a>
cbe1: a9 7f                        lda     #$7f              ;Clear the GETLN flag
cbe3: 20 a0 c9                     jsr     <a href="#SymFLGCLR">FLGCLR</a>
cbe6: ad 7b 05                     lda     <a href="#SymCHORZ">CHORZ</a>             ;Get cursor horizontal
cbe9: e9 47                        sbc     #$47
cbeb: 90 d4                        bcc     <a href="#SymOUTDONE1">OUTDONE1</a>
cbed: 69 1f                        adc     #$1f
cbef: 18           <span id="SymFIXCH">FIXCH</span>           clc
cbf0: 90 d1                        bcc     <a href="#SymOUTDONE">OUTDONE</a>

cbf2: 60           <span id="SymESCTBL">ESCTBL</span>          .dd1    &lt;<a href="#SymCLSCRN">CLSCRN</a>-1
cbf3: 38                           .dd1    &lt;<a href="#SymADVANCE">ADVANCE</a>-1
cbf4: 71                           .dd1    &lt;<a href="#SymBS">BS</a>-1
cbf5: b2                           .dd1    &lt;<a href="#SymLF">LF</a>-1
cbf6: 7b                           .dd1    &lt;<a href="#SymUP">UP</a>-1
cbf7: 00                           .dd1    &lt;<a href="#SymCLREOL">CLREOL</a>-1
cbf8: 48                           .dd1    &lt;<a href="#SymCLREOP">CLREOP</a>-1
cbf9: 66                           .dd1    &lt;<a href="#SymHOME">HOME</a>-1
cbfa: c4           <span id="SymXLTBL">XLTBL</span>           .dd1    $c4
cbfb: c2                           .dd1    $c2
cbfc: c1                           .dd1    $c1
cbfd: ff                           .dd1    $ff
cbfe: c3                           .dd1    $c3
cbff: ea                           .dd1    $ea
                                   .adrend ↑ $c800
</pre>


</div>

<!-- SymbolTable is optional; remove this entire section from the template if you don't want it -->
<div id="symbol-table">
    <h2>Symbol Table</h2>
<p>No exported symbols found.</p>

</div>

<div id="footer">
    <hr/>
    <p>HTML generated by <a href="https://6502bench.com/">6502bench SourceGen</a> v1.8.4
    on 2023/01/10 <!--00:04:01 -08:00--></p>
    <p>Expression style: Common</p>
    <!-- parameters: cols=16,8,18,100;extraCols=Address,Bytes;byteSpc=True;commaBulk=True;nonuPfx='@';varPfx='';labelBrk=False;notes=False;gfx=True;opWrap=64 -->
</div>

</body>
</html>
